<!DOCTYPE html>
<!-- saved from url=(0120)https://a.b.cdn.console.awsstatic.com/a/v1/Z3SG7D5FL3VSV6MSZZD3VB7EYYWQL7ECQEDMOUUGP4YNQHWZS4LQ/global-iframe/index.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src &#39;none&#39;; frame-src &#39;none&#39;; object-src &#39;none&#39;; base-uri &#39;none&#39;; form-action &#39;none&#39;; style-src &#39;self&#39;; script-src &#39;self&#39; &#39;nonce-47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=&#39;; upgrade-insecure-requests; connect-src &#39;self&#39;">
    <title>Continuum Global Storage</title>
    <meta property="csp-nonce" nonce="47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=">
    <script nonce="47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=">var w=Object.defineProperty;var y=(n,e,t)=>e in n?w(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var a=(n,e,t)=>y(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();const u={QuotaExceeded:"QUOTA_EXCEEDED",StorageFailed:"STORAGE_FAILED"};class i extends Error{constructor(t,o,r){super(t);a(this,"code");a(this,"retryable");this.code=o,this.retryable=r,this.name="ContinuumError"}}const c={CONTINUUM_INIT:"CONTINUUM_INIT",CONTINUUM_READY:"CONTINUUM_READY",STORAGE_GET:"STORAGE_GET",STORAGE_SET:"STORAGE_SET",STORAGE_REMOVE:"STORAGE_REMOVE",STORAGE_RESPONSE:"STORAGE_RESPONSE",LOCK_ACQUIRE:"LOCK_ACQUIRE",LOCK_RELEASE:"LOCK_RELEASE",LOCK_ACQUIRED:"LOCK_ACQUIRED"};class S{constructor(){a(this,"dbName","ContinuumGlobalStorage");a(this,"storeName","data");a(this,"version",1);a(this,"database",null)}async get(e){const t=this.database||await this.ensureDB();return new Promise((o,r)=>{const l=t.transaction([this.storeName],"readonly").objectStore(this.storeName).get(e);l.onerror=()=>r(new i("IndexedDB get failed",u.StorageFailed,!0)),l.onsuccess=()=>o(l.result??null)})}async set(e,t){const o=this.database||await this.ensureDB();return new Promise((r,s)=>{const E=o.transaction([this.storeName],"readwrite").objectStore(this.storeName).put(t,e);E.onerror=()=>{var f;((f=E.error)==null?void 0:f.name)==="QuotaExceededError"?s(new i("Storage quota exceeded",u.QuotaExceeded,!1)):s(new i("IndexedDB set failed",u.StorageFailed,!0))},E.onsuccess=()=>r()})}async remove(e){const t=this.database||await this.ensureDB();return new Promise((o,r)=>{const l=t.transaction([this.storeName],"readwrite").objectStore(this.storeName).delete(e);l.onerror=()=>r(new i("IndexedDB remove failed",u.StorageFailed,!0)),l.onsuccess=()=>o()})}async ensureDB(){return this.database||(this.database=await this.openDB()),this.database}openDB(){return new Promise((e,t)=>{const o=indexedDB.open(this.dbName,this.version);o.onerror=()=>{this.database=null,t(o.error)},o.onsuccess=()=>{const r=o.result;r.onversionchange=()=>{r.close()},r.onclose=()=>{this.database=null},e(r)},o.onupgradeneeded=r=>{const s=r.target.result;s.objectStoreNames.contains(this.storeName)||s.createObjectStore(this.storeName)}})}}class O{constructor(e){a(this,"locks",new Map);this.port=e}handleMessage(e){e.type==="LOCK_ACQUIRE"?this.acquireLock(e):e.type==="LOCK_RELEASE"&&this.releaseLock(e)}async acquireLock({lockKey:e,requestId:t}){try{return await navigator.locks.request(e,{mode:"exclusive"},async()=>{const o={type:"LOCK_ACQUIRED",success:!0,requestId:t,lockKey:e};return this.port.postMessage(o),new Promise((r,s)=>{this.locks.set(t,{lockKey:e,resolve:()=>r(!0),reject:s})})}),!0}catch{return!1}}releaseLock({lockKey:e,requestId:t}){const o=this.locks.get(t);if(o&&o.lockKey===e){o.resolve();const r={type:"STORAGE_RESPONSE",requestId:t,success:!0,data:void 0};this.port.postMessage(r),this.locks.delete(t)}}}class g{constructor(e){this.adapter=e}async get(e){try{const t=await this.adapter.get(e.key);if(!t)return null;const o=e.scope?t[e.scope]:t.g;return o?o.m.t&&Date.now()>o.m.t?(await this.remove(e),null):o:null}catch(t){throw new i(`Failed to get data: ${t instanceof Error?t.message:"Unknown error"}`,u.StorageFailed,!0)}}async set(e){var t,o;try{const r=await this.adapter.get(e.key)||{},s=Date.now(),d={v:e.value,m:{v:"1",c:s,u:s,t:e.ttl,r:(t=e.options)==null?void 0:t.encryptionRegion,k:(o=e.options)==null?void 0:o.encryptedWriteKey}};r[e.scope]=d,await this.adapter.set(e.key,r)}catch(r){throw r instanceof Error&&r.name==="QuotaExceededError"?new i("Storage quota exceeded",u.QuotaExceeded,!1):new i(`Failed to set data: ${r instanceof Error?r.message:"Unknown error"}`,u.StorageFailed,!0)}}async remove(e){try{if(!e.scope){await this.adapter.remove(e.key);return}const t=await this.adapter.get(e.key);t!=null&&t[e.scope]&&(delete t[e.scope],Object.keys(t).length===0?await this.adapter.remove(e.key):await this.adapter.set(e.key,t))}catch(t){throw new i(`Failed to remove data: ${t instanceof Error?t.message:"Unknown error"}`,u.StorageFailed,!0)}}}const h=class h{constructor(){a(this,"port");a(this,"lockManager");a(this,"storageManager");this.storageManager=new g(new S),window.addEventListener("message",this.handleChannelInit.bind(this))}static initialize(){h.instance||(h.instance=new h)}handleChannelInit(e){var t;e.data.type===c.CONTINUUM_INIT&&e.ports[0]&&(this.port=e.ports[0],this.lockManager=new O(this.port),this.port.onmessage=({data:o})=>{if(o.type===c.LOCK_ACQUIRE||o.type===c.LOCK_RELEASE){this.lockManager.handleMessage(o);return}this.handleStorageMessage(o)},(t=e.source)==null||t.postMessage({type:c.CONTINUUM_READY,requestId:e.data.requestId},e.origin),window.removeEventListener("message",this.handleChannelInit.bind(this)))}async handleStorageMessage(e){if(e.type)try{let t;const o=[];switch(e.type){case c.STORAGE_GET:{const s=await this.storageManager.get(e);s&&(t=s,s.v instanceof ArrayBuffer&&o.push(s.v));break}case c.STORAGE_SET:await this.storageManager.set(e);break;case c.STORAGE_REMOVE:await this.storageManager.remove(e);break;default:throw new Error(`Unknown operation: ${e.type}`)}const r={type:c.STORAGE_RESPONSE,requestId:e.requestId,success:!0,data:t};this.port.postMessage(r,o)}catch(t){const o={type:c.STORAGE_RESPONSE,requestId:e.requestId,success:!1,error:t instanceof i||t instanceof Error?t.message:"Unknown error",code:t instanceof i?t.code:void 0};this.port.postMessage(o)}}};a(h,"instance");let p=h;p.initialize();
</script>
  </head>
  <body>
  

</body></html>